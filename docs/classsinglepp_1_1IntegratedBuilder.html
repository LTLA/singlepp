<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>singlepp: singlepp::IntegratedBuilder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">singlepp
   </div>
   <div id="projectbrief">A C++ library for MNN batch correction</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>singlepp</b></li><li class="navelem"><a class="el" href="classsinglepp_1_1IntegratedBuilder.html">IntegratedBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsinglepp_1_1IntegratedBuilder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">singlepp::IntegratedBuilder Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Factory to prepare multiple references for integrated classification.  
 <a href="classsinglepp_1_1IntegratedBuilder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="IntegratedBuilder_8hpp_source.html">IntegratedBuilder.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af855594cdb90ec5227c980dd701156e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsinglepp_1_1IntegratedBuilder.html#af855594cdb90ec5227c980dd701156e3">add</a> (const tatami::Matrix&lt; double, int &gt; *ref, const int *labels, const <a class="el" href="structsinglepp_1_1SinglePP_1_1Prebuilt.html">SinglePP::Prebuilt</a> &amp;built)</td></tr>
<tr class="separator:af855594cdb90ec5227c980dd701156e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee9ae83b010990ba4020bedc3f7dc61"><td class="memTemplParams" colspan="2">template&lt;typename Id &gt; </td></tr>
<tr class="memitem:a3ee9ae83b010990ba4020bedc3f7dc61"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classsinglepp_1_1IntegratedBuilder.html#a3ee9ae83b010990ba4020bedc3f7dc61">add</a> (size_t mat_nrow, const Id *mat_id, const tatami::Matrix&lt; double, int &gt; *ref, const Id *ref_id, const int *labels, const <a class="el" href="structsinglepp_1_1SinglePP_1_1PrebuiltIntersection.html">SinglePP::PrebuiltIntersection</a> &amp;built)</td></tr>
<tr class="separator:a3ee9ae83b010990ba4020bedc3f7dc61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a980f86775bcb3de1f7d9ed24a1f3458b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structsinglepp_1_1IntegratedReference.html">IntegratedReference</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsinglepp_1_1IntegratedBuilder.html#a980f86775bcb3de1f7d9ed24a1f3458b">finish</a> ()</td></tr>
<tr class="separator:a980f86775bcb3de1f7d9ed24a1f3458b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Factory to prepare multiple references for integrated classification. </p>
<p >For each reference dataset, we expect a <code><a class="el" href="structsinglepp_1_1SinglePP_1_1Prebuilt.html" title="Prebuilt references that can be directly used for annotation.">SinglePP::Prebuilt</a></code> or <code><a class="el" href="structsinglepp_1_1SinglePP_1_1PrebuiltIntersection.html" title="Prebuilt references requiring an intersection of features.">SinglePP::PrebuiltIntersection</a></code> object, as well as the original data structures (matrix, labels, etc.) used to construct that object. These values are passed into <code>add()</code> to register that dataset, which can be repeated multiple times for different references. Finally, calling <code><a class="el" href="classsinglepp_1_1IntegratedBuilder.html#a980f86775bcb3de1f7d9ed24a1f3458b">finish()</a></code> will return a vector of <code><a class="el" href="structsinglepp_1_1IntegratedReference.html" title="Reference dataset prepared for integrated classification.">IntegratedReference</a></code> objects that can be used in <code><a class="el" href="classsinglepp_1_1IntegratedScorer.html" title="Integrate classifications from multiple references.">IntegratedScorer</a></code>.</p>
<p >The preparation process mostly involves checking that the gene indices are consistent across references. This is especially true when each reference contains a different set of features that must be intersected with the features in the test dataset. See the documentation for <code><a class="el" href="classsinglepp_1_1IntegratedScorer.html" title="Integrate classifications from multiple references.">IntegratedScorer</a></code> for more details about what the integration process entails. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af855594cdb90ec5227c980dd701156e3" name="af855594cdb90ec5227c980dd701156e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af855594cdb90ec5227c980dd701156e3">&#9670;&nbsp;</a></span>add() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void singlepp::IntegratedBuilder::add </td>
          <td>(</td>
          <td class="paramtype">const tatami::Matrix&lt; double, int &gt; *&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsinglepp_1_1SinglePP_1_1Prebuilt.html">SinglePP::Prebuilt</a> &amp;&#160;</td>
          <td class="paramname"><em>built</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">ref</td><td>Matrix containing the reference expression values. Rows are features and columns are reference samples. The number and identity of features should be identical to the test dataset to be classified in <code><a class="el" href="classsinglepp_1_1IntegratedScorer.html" title="Integrate classifications from multiple references.">IntegratedScorer</a></code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">labels</td><td>Pointer to an array of label assignments. The smallest label should be 0 and the largest label should be equal to the total number of unique labels minus 1. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">built</td><td>The built reference created by running <code><a class="el" href="classsinglepp_1_1SinglePP.html#ac4d206142c5eedd2cf12a500bfc10655">SinglePP::build()</a></code> on <code>ref</code> and <code>labels</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The reference dataset is registered for later use in <code><a class="el" href="classsinglepp_1_1IntegratedBuilder.html#a980f86775bcb3de1f7d9ed24a1f3458b">finish()</a></code>.</dd></dl>
<p><code>ref</code> and <code>labels</code> are expected to remain valid until <code><a class="el" href="classsinglepp_1_1IntegratedBuilder.html#a980f86775bcb3de1f7d9ed24a1f3458b">finish()</a></code> is called. </p>

</div>
</div>
<a id="a3ee9ae83b010990ba4020bedc3f7dc61" name="a3ee9ae83b010990ba4020bedc3f7dc61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee9ae83b010990ba4020bedc3f7dc61">&#9670;&nbsp;</a></span>add() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Id &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void singlepp::IntegratedBuilder::add </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>mat_nrow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Id *&#160;</td>
          <td class="paramname"><em>mat_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const tatami::Matrix&lt; double, int &gt; *&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Id *&#160;</td>
          <td class="paramname"><em>ref_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsinglepp_1_1SinglePP_1_1PrebuiltIntersection.html">SinglePP::PrebuiltIntersection</a> &amp;&#160;</td>
          <td class="paramname"><em>built</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Id</td><td>Type of the gene identifier for each row.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">mat_nrow</td><td>Number of rows (genes) in the test dataset. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mat_id</td><td>Pointer to an array of identifiers of length equal to <code>mat_nrow</code>. This should contain a unique identifier for each row of <code>mat</code> (typically a gene name or index). </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ref</td><td>An expression matrix for the reference expression profiles, where rows are genes and columns are cells. This should have non-zero columns. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref_id</td><td>Pointer to an array of identifiers of length equal to the number of rows of any <code>ref</code>. This should contain a unique identifier for each row in <code>ref</code>, and should be comparable to <code>mat_id</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">labels</td><td>An array of length equal to the number of columns of <code>ref</code>, containing the label for each sample. The smallest label should be 0 and the largest label should be equal to the total number of unique labels minus 1. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">built</td><td>The built reference created by running <code><a class="el" href="classsinglepp_1_1SinglePP.html#ac4d206142c5eedd2cf12a500bfc10655">SinglePP::build()</a></code> on all preceding arguments.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The reference dataset is registered for later use in <code><a class="el" href="classsinglepp_1_1IntegratedBuilder.html#a980f86775bcb3de1f7d9ed24a1f3458b">finish()</a></code>.</dd></dl>
<p><code>ref</code> and <code>labels</code> are expected to remain valid until <code><a class="el" href="classsinglepp_1_1IntegratedBuilder.html#a980f86775bcb3de1f7d9ed24a1f3458b">finish()</a></code> is called. </p>

</div>
</div>
<a id="a980f86775bcb3de1f7d9ed24a1f3458b" name="a980f86775bcb3de1f7d9ed24a1f3458b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a980f86775bcb3de1f7d9ed24a1f3458b">&#9670;&nbsp;</a></span>finish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structsinglepp_1_1IntegratedReference.html">IntegratedReference</a> &gt; singlepp::IntegratedBuilder::finish </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>A vector of integrated references, for use in <code><a class="el" href="classsinglepp_1_1IntegratedScorer.html#a6deefdafc76b5c01e641e62e2edd7442">IntegratedScorer::run()</a></code>.</dd></dl>
<p>This function should only be called once, after all reference datasets have been registered with <code>add()</code>. Any further invocations of this function will not be valid. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>singlepp/<a class="el" href="IntegratedBuilder_8hpp_source.html">IntegratedBuilder.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
